<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ… - ØªØ®Ù„Øµ Ù…Ù† Ø§Ù„Ø³Ù‡Ø±</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1a1a2e">
    <meta name="description" content="ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„ØªØ®Ù„Øµ Ù…Ù† Ø¹Ø§Ø¯Ø© Ø§Ù„Ø³Ù‡Ø± ÙˆØ¥Ø¯Ù…Ø§Ù† Ø§Ù„Ù‡Ø§ØªÙ Ù„ÙŠÙ„Ø§Ù‹">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ…">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- App Icons -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ™</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ™</text></svg>">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="data:application/json,%7B%22name%22%3A%22%D9%88%D9%82%D8%AA%20%D8%A7%D9%84%D9%86%D9%88%D9%85%22%2C%22short_name%22%3A%22%D9%88%D9%82%D8%AA%20%D8%A7%D9%84%D9%86%D9%88%D9%85%22%2C%22description%22%3A%22%D8%AA%D8%B7%D8%A8%D9%8A%D9%82%20%D9%84%D9%84%D8%AA%D8%AE%D9%84%D8%B5%20%D9%85%D9%86%20%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%B3%D9%87%D8%B1%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22orientation%22%3A%22portrait%22%2C%22background_color%22%3A%22%231a1a2e%22%2C%22theme_color%22%3A%22%231a1a2e%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fsvg%2Bxml%2C%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20100%20100%27%3E%3Ctext%20y%3D%27.9em%27%20font-size%3D%2790%27%3E%F0%9F%8C%99%3C%2Ftext%3E%3C%2Fsvg%3E%22%2C%22sizes%22%3A%22any%22%2C%22type%22%3A%22image%2Fsvg%2Bxml%22%7D%5D%7D">
    
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        .lock-screen {
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a2e 50%, #0f1729 100%);
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .moon {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #f5f5dc 0%, #ffd700 100%);
            border-radius: 50%;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.5);
            position: relative;
        }
        
        .moon::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 90px;
            height: 90px;
            background: #0a0a1a;
            border-radius: 50%;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .glow {
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.5);
        }
        
        input[type="time"] {
            color-scheme: dark;
        }
        
        .warning-pulse {
            animation: warningPulse 1s infinite;
        }
        
        @keyframes warningPulse {
            0%, 100% { background-color: rgba(251, 191, 36, 0.2); }
            50% { background-color: rgba(251, 191, 36, 0.4); }
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .breathing-text {
            animation: breathe 4s infinite;
        }
        
        @keyframes breathe {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .lock-overlay {
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="min-h-screen bg-gray-900">
    <!-- ØªÙ†Ø¨ÙŠÙ‡ Ù‚Ø¨Ù„ Ø§Ù„Ù‚ÙÙ„ -->
    <div id="warningAlert" class="fixed inset-0 z-40 bg-black/70 flex items-center justify-center hidden">
        <div class="warning-pulse bg-yellow-900/90 border-2 border-yellow-500 rounded-3xl p-8 max-w-md mx-4 text-center slide-up">
            <div class="text-7xl mb-4 floating">â°</div>
            <h2 class="text-3xl font-bold text-yellow-400 mb-4">ØªÙ†Ø¨ÙŠÙ‡!</h2>
            <p class="text-xl text-yellow-100 mb-4">Ø¨Ø§Ù‚ÙŠ <span id="warningMinutes">15</span> Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù„Ù‰ ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ…</p>
            <p class="text-yellow-200 mb-6">Ø£Ù†Ù‡Ù Ù…Ø§ ØªÙØ¹Ù„Ù‡ ÙˆØ§Ø³ØªØ¹Ø¯ Ù„Ù„Ù†ÙˆÙ… Ø§Ù„Ø¢Ù†</p>
            
            <div class="bg-yellow-800/50 rounded-xl p-4 mb-6">
                <p class="text-yellow-100 text-sm" id="warningTip">ğŸ’¡ Ø¶Ø¹ Ù‡Ø§ØªÙÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø­Ù† Ø¨Ø¹ÙŠØ¯Ø§Ù‹ Ø¹Ù† Ø³Ø±ÙŠØ±Ùƒ</p>
            </div>
            
            <button onclick="dismissWarning()" class="bg-yellow-600 hover:bg-yellow-700 text-white px-8 py-3 rounded-xl transition-all font-bold">
                Ø­Ø³Ù†Ø§Ù‹ØŒ ÙÙ‡Ù…Øª âœ“
            </button>
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ -->
    <div id="lockScreen" class="lock-screen fixed inset-0 z-50 flex flex-col items-center justify-center hidden">
        <div class="stars" id="stars"></div>
        
        <div class="text-center slide-up px-4">
            <div class="moon mx-auto mb-6 pulse"></div>
            
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">ğŸŒ™ ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ…</h1>
            
            <p class="text-xl text-indigo-200 mb-6 breathing-text" id="sleepMessage">Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„Ø±Ø§Ø­Ø©...</p>
            
            <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-6 mb-6 max-w-md mx-auto">
                <p class="text-indigo-200 text-lg mb-2">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ</p>
                <p class="text-5xl font-bold text-white mb-4" id="currentTimeLock">00:00</p>
                
                <p class="text-indigo-200 text-lg mb-2">ÙŠÙ†ØªÙ‡Ù‰ Ø§Ù„Ù‚ÙÙ„ Ø¨Ø¹Ø¯</p>
                <p class="text-3xl font-bold text-green-400" id="remainingTime">0 Ø³Ø§Ø¹Ø© Ùˆ 0 Ø¯Ù‚ÙŠÙ‚Ø©</p>
            </div>
            
            <!-- Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù…Ù‚Ù†Ø¹Ø© -->
            <div class="bg-gradient-to-r from-purple-900/50 to-indigo-900/50 backdrop-blur-lg rounded-2xl p-5 mb-6 max-w-md mx-auto border border-purple-500/30">
                <div class="flex items-center justify-center gap-2 mb-3">
                    <span class="text-2xl">ğŸ’</span>
                    <h3 class="text-lg font-bold text-purple-300">Ù†ØµÙŠØ­Ø© Ø§Ù„Ù„ÙŠÙ„Ø©</h3>
                </div>
                <p class="text-white text-lg leading-relaxed" id="dailyAdvice">
                    Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ù…Ø¨ÙƒØ± ÙŠØ¬Ø¹Ù„Ùƒ Ø£ÙƒØ«Ø± Ø°ÙƒØ§Ø¡Ù‹ ÙˆØ¥Ø¨Ø¯Ø§Ø¹Ø§Ù‹
                </p>
            </div>
            
            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ© ØªØ­ÙÙŠØ²ÙŠØ© -->
            <div class="bg-green-900/30 rounded-xl p-4 mb-6 max-w-md mx-auto border border-green-500/30">
                <p class="text-green-300" id="motivationStat">ğŸ† Ø£Ù†Øª ÙÙŠ Ø³Ù„Ø³Ù„Ø© Ù†Ø¬Ø§Ø­: 0 Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ©</p>
            </div>
            
            <div class="space-y-4">
                <button onclick="requestUnlock()" class="bg-red-500/20 hover:bg-red-500/40 text-red-300 px-8 py-3 rounded-full transition-all border border-red-500/50">
                    ğŸ”“ Ø·Ù„Ø¨ ÙØªØ­ Ø§Ù„Ù‚ÙÙ„ (Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙÙ‚Ø·)
                </button>
                
                <p class="text-indigo-300 text-sm" id="skipCount">Ù…Ø±Ø§Øª Ø§Ù„ØªØ®Ø·ÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹: 0</p>
            </div>
        </div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ ÙØªØ­ Ø§Ù„Ù‚ÙÙ„ Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
    <div id="unlockModal" class="fixed inset-0 z-[60] bg-black/90 flex items-center justify-center hidden">
        <div id="unlockModalContent" class="bg-gray-800 rounded-3xl p-8 max-w-md mx-4 text-center slide-up">
            <div class="text-6xl mb-4">ğŸ¤”</div>
            <h2 class="text-2xl font-bold text-white mb-4">Ù„Ø­Ø¸Ø© ØªØ£Ù…Ù„...</h2>
            
            <p class="text-gray-300 mb-4" id="unlockQuestion">Ù‡Ù„ ÙØ¹Ù„Ø§Ù‹ ØªØ­ØªØ§Ø¬ Ù‡Ø§ØªÙÙƒ Ø§Ù„Ø¢Ù†ØŸ</p>
            
            <div class="bg-red-900/30 rounded-xl p-4 mb-6 border border-red-500/30">
                <p class="text-red-300 text-sm" id="unlockConsequence">
                    âš ï¸ ÙƒÙ„ Ù…Ø±Ø© ØªÙØªØ­ Ø§Ù„Ù‚ÙÙ„ØŒ ØªØ¶Ø¹Ù Ù‚ÙˆØ© Ø¥Ø±Ø§Ø¯ØªÙƒ ÙˆØªØ¨ØªØ¹Ø¯ Ø¹Ù† Ù‡Ø¯ÙÙƒ
                </p>
            </div>
            
            <div class="space-y-3">
                <button onclick="closeUnlockModal()" class="w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl transition-all font-bold text-lg">
                    âœ“ ØµØ­ÙŠØ­! Ø³Ø£Ù†Ø§Ù… Ø§Ù„Ø¢Ù†
                </button>
                <button onclick="showFinalWarning()" class="w-full bg-gray-700 hover:bg-gray-600 text-gray-300 py-3 rounded-xl transition-all text-sm">
                    Ù…Ø§ Ø²Ù„Øª Ø£Ø±ÙŠØ¯ Ø§Ù„ÙØªØ­...
                </button>
            </div>
        </div>
    </div>
    
    <!-- Ø§Ù„ØªØ­Ø°ÙŠØ± Ø§Ù„Ø£Ø®ÙŠØ± -->
    <div id="finalWarning" class="fixed inset-0 z-[70] bg-black/95 flex items-center justify-center hidden">
        <div class="bg-red-900/80 border-2 border-red-500 rounded-3xl p-8 max-w-md mx-4 text-center slide-up">
            <div class="text-6xl mb-4">â›”</div>
            <h2 class="text-2xl font-bold text-red-400 mb-4">ØªØ­Ø°ÙŠØ± Ø£Ø®ÙŠØ±!</h2>
            
            <p class="text-white mb-4" id="finalAdvice">
                ØªØ°ÙƒØ±: Ø£Ù†Øª ÙˆØ¶Ø¹Øª Ù‡Ø°Ø§ Ø§Ù„Ù‚ÙÙ„ Ù„Ø³Ø¨Ø¨ Ù…Ù‡Ù…. ØµØ­ØªÙƒ ÙˆÙ†Ø¬Ø§Ø­Ùƒ ÙŠØ¹ØªÙ…Ø¯Ø§Ù† Ø¹Ù„Ù‰ Ù†ÙˆÙ… Ø¬ÙŠØ¯.
            </p>
            
            <div class="bg-black/50 rounded-xl p-4 mb-6">
                <p class="text-yellow-400 font-bold mb-2">Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„ØªØ®Ø·ÙŠ: <span id="totalSkips">0</span></p>
                <p class="text-gray-400 text-sm">Ø³ÙŠÙØ³Ø¬Ù„ Ù‡Ø°Ø§ Ø§Ù„ØªØ®Ø·ÙŠ ÙˆØ³ØªÙÙ‚Ø¯ Ø³Ù„Ø³Ù„Ø© Ù†Ø¬Ø§Ø­Ùƒ</p>
            </div>
            
            <div class="space-y-3">
                <button onclick="confirmUnlock()" class="w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl transition-all">
                    Ø£ÙÙ‡Ù… Ø§Ù„Ø¹ÙˆØ§Ù‚Ø¨ - Ø§ÙØªØ­ Ø§Ù„Ù‚ÙÙ„
                </button>
                <button onclick="closeFinalWarning()" class="w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl transition-all font-bold text-lg">
                    ğŸ’ª Ù„Ø§! Ø³Ø£ÙƒÙˆÙ† Ù‚ÙˆÙŠØ§Ù‹ ÙˆØ£Ù†Ø§Ù…
                </button>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div id="mainScreen" class="min-h-screen bg-gradient-to-br from-gray-900 via-indigo-900 to-purple-900 p-4 md:p-8">
        <div class="max-w-2xl mx-auto">
            <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
            <div class="text-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">ğŸŒ™ ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ…</h1>
                <p class="text-indigo-200">ØªØ®Ù„Øµ Ù…Ù† Ø¹Ø§Ø¯Ø© Ø§Ù„Ø³Ù‡Ø± ÙˆØ§Ø³ØªØ¹Ø¯ Ù†Ø´Ø§Ø·Ùƒ</p>
            </div>
            
            <!-- Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© -->
            <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-6 mb-6 glow">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-white text-xl font-bold">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
                    <span id="statusBadge" class="px-4 py-1 rounded-full text-sm font-bold bg-green-500 text-white">Ù†Ø´Ø·</span>
                </div>
                
                <div class="text-center">
                    <p class="text-6xl font-bold text-white mb-2" id="currentTime">00:00</p>
                    <p class="text-indigo-200" id="currentDate">Ø§Ù„Ø£Ø­Ø¯ØŒ 1 ÙŠÙ†Ø§ÙŠØ± 2024</p>
                </div>
                
                <div id="nextLockInfo" class="mt-4 text-center bg-white/5 rounded-xl p-3">
                    <p class="text-indigo-300 text-sm">Ø§Ù„Ù‚ÙÙ„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯: <span id="nextLockTime" class="font-bold text-white">--</span></p>
                </div>
            </div>
            
            <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Øª -->
            <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-6 mb-6">
                <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                    <span>â°</span> Ø¶Ø¨Ø· Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ù‚ÙÙ„
                </h2>
                
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div>
                        <label class="block text-indigo-200 mb-2 text-sm">Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù‚ÙÙ„ (ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ…)</label>
                        <input type="time" id="startTime" value="22:00" 
                            class="w-full bg-white/10 border border-indigo-400/30 rounded-xl px-4 py-3 text-white text-center text-xl focus:outline-none focus:border-indigo-400">
                    </div>
                    <div>
                        <label class="block text-indigo-200 mb-2 text-sm">Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù‚ÙÙ„ (ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªÙŠÙ‚Ø§Ø¸)</label>
                        <input type="time" id="endTime" value="05:00" 
                            class="w-full bg-white/10 border border-indigo-400/30 rounded-xl px-4 py-3 text-white text-center text-xl focus:outline-none focus:border-indigo-400">
                    </div>
                </div>
                
                <div class="space-y-3 mb-6">
                    <div class="flex items-center justify-between p-4 bg-white/5 rounded-xl">
                        <span class="text-white">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù‚ÙÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="lockEnabled" class="sr-only peer" checked>
                            <div class="w-14 h-7 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-white/5 rounded-xl">
                        <span class="text-white">ØªÙ†Ø¨ÙŠÙ‡ Ù‚Ø¨Ù„ Ø§Ù„Ù‚ÙÙ„ Ø¨Ù€ 15 Ø¯Ù‚ÙŠÙ‚Ø©</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="warningEnabled" class="sr-only peer" checked>
                            <div class="w-14 h-7 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-yellow-600"></div>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-white/5 rounded-xl">
                        <span class="text-white">ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="soundEnabled" class="sr-only peer" checked>
                            <div class="w-14 h-7 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-600"></div>
                        </label>
                    </div>
                </div>
                
                <button onclick="saveSettings()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-xl transition-all font-bold">
                    ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </div>
            
            <!-- Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ… -->
            <div class="bg-gradient-to-r from-purple-800/50 to-pink-800/50 backdrop-blur-lg rounded-3xl p-6 mb-6 border border-purple-500/30">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <span>ğŸ’¡</span> Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ…
                </h2>
                <p class="text-purple-100 text-lg leading-relaxed" id="dailyTip">
                    Ø¶Ø¹ Ù‡Ø§ØªÙÙƒ Ø¨Ø¹ÙŠØ¯Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø³Ø±ÙŠØ± Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ… Ø¨Ø³Ø§Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.
                </p>
                <p class="text-purple-300 text-sm mt-3" id="tipNumber">Ø§Ù„Ù†ØµÙŠØ­Ø© 1 Ù…Ù† 30</p>
            </div>
            
            <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-6 mb-6">
                <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                    <span>ğŸ“Š</span> Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ
                </h2>
                
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white/5 rounded-xl p-4 text-center">
                        <p class="text-3xl font-bold text-green-400" id="successDays">0</p>
                        <p class="text-indigo-200 text-sm">Ø£ÙŠØ§Ù… Ù†Ø§Ø¬Ø­Ø©</p>
                    </div>
                    <div class="bg-white/5 rounded-xl p-4 text-center">
                        <p class="text-3xl font-bold text-red-400" id="skipDays">0</p>
                        <p class="text-indigo-200 text-sm">Ù…Ø±Ø§Øª Ø§Ù„ØªØ®Ø·ÙŠ</p>
                    </div>
                    <div class="bg-white/5 rounded-xl p-4 text-center">
                        <p class="text-3xl font-bold text-yellow-400" id="currentStreak">0</p>
                        <p class="text-indigo-200 text-sm">Ø³Ù„Ø³Ù„Ø© Ù…ØªØªØ§Ù„ÙŠØ©</p>
                    </div>
                    <div class="bg-white/5 rounded-xl p-4 text-center">
                        <p class="text-3xl font-bold text-purple-400" id="bestStreak">0</p>
                        <p class="text-indigo-200 text-sm">Ø£ÙØ¶Ù„ Ø³Ù„Ø³Ù„Ø©</p>
                    </div>
                </div>
                
                <button onclick="resetStats()" class="w-full mt-4 bg-red-500/20 hover:bg-red-500/40 text-red-300 py-2 rounded-xl transition-all text-sm">
                    Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                </button>
            </div>
            
            <!-- Ø²Ø± Ø§Ø®ØªØ¨Ø§Ø± -->
            <div class="mt-6 text-center space-x-4 space-x-reverse">
                <button onclick="testWarning()" class="text-yellow-300 hover:text-white text-sm underline">
                    ğŸ”” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
                </button>
                <button onclick="testLockScreen()" class="text-indigo-300 hover:text-white text-sm underline">
                    ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„
                </button>
            </div>
            
            <!-- Ø²Ø± ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
            <div id="installSection" class="mt-8 bg-gradient-to-r from-green-800/50 to-teal-800/50 backdrop-blur-lg rounded-3xl p-6 border border-green-500/30">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <span>ğŸ“²</span> ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ù‡Ø§ØªÙÙƒ
                </h2>
                
                <div id="installPrompt" class="hidden">
                    <p class="text-green-100 mb-4">ÙŠÙ…ÙƒÙ†Ùƒ ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù„Ù‰ Ø´Ø§Ø´ØªÙƒ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©!</p>
                    <button id="installBtn" onclick="installApp()" class="w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl transition-all font-bold text-lg flex items-center justify-center gap-2">
                        <span>ğŸ“¥</span> ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¢Ù†
                    </button>
                </div>
                
                <div id="installInstructions">
                    <p class="text-green-100 mb-4">Ø§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:</p>
                    
                    <div class="space-y-3 text-right">
                        <div class="bg-white/10 rounded-xl p-4">
                            <p class="text-white font-bold mb-2">ğŸ“± Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ (Chrome):</p>
                            <ol class="text-green-200 text-sm space-y-2 list-decimal list-inside">
                                <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© â‹® (Ø«Ù„Ø§Ø« Ù†Ù‚Ø§Ø·) ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØµÙØ­</li>
                                <li>Ø§Ø®ØªØ± "ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚" Ø£Ùˆ "Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"</li>
                                <li>Ø§Ø¶ØºØ· "ØªØ«Ø¨ÙŠØª" ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©</li>
                                <li>Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø´Ø§Ø´ØªÙƒ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©! ğŸ‰</li>
                            </ol>
                        </div>
                        
                        <div class="bg-white/10 rounded-xl p-4">
                            <p class="text-white font-bold mb-2">ğŸ Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø¢ÙŠÙÙˆÙ† (Safari):</p>
                            <ol class="text-green-200 text-sm space-y-2 list-decimal list-inside">
                                <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© â¬†ï¸ ÙÙŠ Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø©</li>
                                <li>Ù…Ø±Ø± Ù„Ø£Ø³ÙÙ„ ÙˆØ§Ø®ØªØ± "Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"</li>
                                <li>Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ©" ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†</li>
                                <li>Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙƒØ£ÙŠÙ‚ÙˆÙ†Ø© Ø¹Ù„Ù‰ Ø´Ø§Ø´ØªÙƒ! ğŸ‰</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="mt-4 bg-yellow-900/30 rounded-xl p-4 border border-yellow-500/30">
                        <p class="text-yellow-300 text-sm">
                            âš ï¸ <strong>Ù†ØµÙŠØ­Ø© Ù…Ù‡Ù…Ø©:</strong> Ø¨Ø¹Ø¯ Ø§Ù„ØªØ«Ø¨ÙŠØªØŒ Ø§ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (ÙˆÙ„ÙŠØ³ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­) Ù„ØªØ¬Ø±Ø¨Ø© Ø£ÙØ¶Ù„ Ø¨Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©!
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
            <div class="mt-6 text-center text-indigo-300 text-sm">
                <p>ğŸ’¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª Ø¨Ø¹Ø¯ Ø§Ù„ØªØ«Ø¨ÙŠØª</p>
                <p class="mt-1">ğŸ”’ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ ÙÙ‚Ø·</p>
            </div>
        </div>
    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
        let settings = {
            startTime: '22:00',
            endTime: '05:00',
            enabled: true,
            warningEnabled: true,
            soundEnabled: true
        };
        
        let stats = {
            successDays: 0,
            skipDays: 0,
            currentStreak: 0,
            bestStreak: 0,
            lastCheckDate: null,
            weeklySkips: 0,
            weekStart: null
        };
        
        let warningShown = false;
        let warningDismissed = false;
        
        // Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„Ù…Ù‚Ù†Ø¹Ø© (30 Ù†ØµÙŠØ­Ø© Ù…Ø®ØªÙ„ÙØ©)
        const dailyAdvices = [
            "Ø§Ù„Ù‡Ø§ØªÙ Ø³ÙŠÙƒÙˆÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ ØºØ¯Ø§Ù‹ØŒ Ù„ÙƒÙ† ØµØ­ØªÙƒ Ù‚Ø¯ Ù„Ø§ ØªÙ†ØªØ¸Ø±. ÙƒÙ„ Ø³Ø§Ø¹Ø© Ø³Ù‡Ø± ØªØ³Ø±Ù‚ Ù…Ù† Ø¹Ù…Ø±Ùƒ.",
            "Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡ ÙŠÙ‚ÙˆÙ„ÙˆÙ†: Ø§Ù„Ù†ÙˆÙ… Ù‚Ø¨Ù„ 11 Ù…Ø³Ø§Ø¡Ù‹ ÙŠØ¶Ø§Ø¹Ù Ø¥Ù†ØªØ§Ø¬ Ù‡Ø±Ù…ÙˆÙ† Ø§Ù„Ù†Ù…Ùˆ ÙˆØ§Ù„Ø´Ø¨Ø§Ø¨.",
            "Ù‡Ù„ ØªØ¹Ù„Ù… Ø£Ù† Ø§Ù„Ø³Ù‡Ø± ÙŠØ³Ø¨Ø¨ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù†ØŸ Ø¬Ø³Ù…Ùƒ ÙŠÙØ±Ø² Ù‡Ø±Ù…ÙˆÙ† Ø§Ù„Ø¬ÙˆØ¹ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙ†Ø§Ù….",
            "ÙƒÙ„ Ø¥Ø´Ø¹Ø§Ø± ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙ†ØªØ¸Ø±ØŒ Ù„ÙƒÙ† Ø¯Ù…Ø§ØºÙƒ ÙŠØ­ØªØ§Ø¬ Ø§Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ø¢Ù†.",
            "Ø§Ù„Ù†Ø§Ø¬Ø­ÙˆÙ† ÙŠÙ†Ø§Ù…ÙˆÙ† Ù…Ø¨ÙƒØ±Ø§Ù‹. Ø¬ÙŠÙ Ø¨ÙŠØ²ÙˆØ³ ÙŠÙ†Ø§Ù… 8 Ø³Ø§Ø¹Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹.",
            "Ø´Ø§Ø´Ø© Ø§Ù„Ù‡Ø§ØªÙ ØªØ®Ø¯Ø¹ Ø¯Ù…Ø§ØºÙƒ ÙˆØªÙˆÙ‚Ù Ø¥ÙØ±Ø§Ø² Ø§Ù„Ù…ÙŠÙ„Ø§ØªÙˆÙ†ÙŠÙ†. Ø£ØºÙ„Ù‚Ù‡Ø§ Ø§Ù„Ø¢Ù†.",
            "ØºØ¯Ø§Ù‹ Ø³ØªØ´ÙƒØ± Ù†ÙØ³Ùƒ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø±Ø§Ø±. Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ø¢Ù† = Ø·Ø§Ù‚Ø© Ù…Ø¶Ø§Ø¹ÙØ©.",
            "Ø§Ù„Ø³Ù‡Ø± Ø§Ù„Ù…ØªÙƒØ±Ø± ÙŠØ¶Ø¹Ù Ø§Ù„Ù…Ù†Ø§Ø¹Ø© ÙˆÙŠØ¬Ø¹Ù„Ùƒ Ø¹Ø±Ø¶Ø© Ù„Ù„Ø£Ù…Ø±Ø§Ø¶.",
            "Ø°Ø§ÙƒØ±ØªÙƒ ØªØªØ­Ø³Ù† Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†ÙˆÙ…. ÙƒÙ„ Ù…Ø§ ØªØ¹Ù„Ù…ØªÙ‡ Ø§Ù„ÙŠÙˆÙ… ÙŠÙØ­ÙØ¸ Ø§Ù„Ø¢Ù†.",
            "Ø§Ù„Ø¨Ø´Ø±Ø© ØªØªØ¬Ø¯Ø¯ Ù„ÙŠÙ„Ø§Ù‹. Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ù…Ø¨ÙƒØ± = Ø¨Ø´Ø±Ø© Ø£Ø¬Ù…Ù„ ÙˆØ£ØµØºØ± Ø³Ù†Ø§Ù‹.",
            "Ø§Ù„ØªØ±ÙƒÙŠØ² ÙˆØ§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙŠØ­ØªØ§Ø¬Ø§Ù† Ù†ÙˆÙ…Ø§Ù‹ ÙƒØ§ÙÙŠØ§Ù‹. Ù„Ø§ ØªØ³Ø±Ù‚ Ù…Ù† ØºØ¯Ùƒ.",
            "Ø§Ù„Ù‚Ù„Ù‚ ÙˆØ§Ù„Ø§ÙƒØªØ¦Ø§Ø¨ ÙŠØ²ÙŠØ¯Ø§Ù† Ù…Ø¹ Ù‚Ù„Ø© Ø§Ù„Ù†ÙˆÙ…. Ø±Ø§Ø­ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ© ØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù†.",
            "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠÙˆÙ† Ø§Ù„Ù…Ø­ØªØ±ÙÙˆÙ† ÙŠÙ†Ø§Ù…ÙˆÙ† 10 Ø³Ø§Ø¹Ø§Øª. Ø§Ù„Ù†ÙˆÙ… Ø³Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù„ÙŠ.",
            "Ù‡Ø§ØªÙÙƒ Ù…ØµÙ…Ù… Ù„Ø¥Ø¯Ù…Ø§Ù†Ùƒ. ÙƒÙ† Ø£Ù‚ÙˆÙ‰ Ù…Ù†Ù‡ ÙˆØ§Ø®ØªØ± ØµØ­ØªÙƒ.",
            "ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ø³Ù‡Ø± = Ø¯Ù‚ÙŠÙ‚ØªØ§Ù† ØªØ¹Ø¨ ØºØ¯Ø§Ù‹. Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø³ÙŠØ·.",
            "Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ø¬ÙŠØ¯ ÙŠØ­Ø³Ù† Ù‚Ø±Ø§Ø±Ø§ØªÙƒ Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ø­ÙŠØ§ØªÙŠØ©.",
            "Ø§Ù„Ø³Ù‡Ø± ÙŠØ±ÙØ¹ Ø¶ØºØ· Ø§Ù„Ø¯Ù… ÙˆÙŠØ¶Ø± Ø§Ù„Ù‚Ù„Ø¨. Ù‚Ù„Ø¨Ùƒ ÙŠØ³ØªØ­Ù‚ Ø§Ù„Ø±Ø§Ø­Ø©.",
            "Ø¯Ù…Ø§ØºÙƒ ÙŠÙ†Ø¸Ù Ø§Ù„Ø³Ù…ÙˆÙ… Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ø¹Ù…ÙŠÙ‚. Ø§Ù…Ù†Ø­Ù‡ Ø§Ù„ÙØ±ØµØ©.",
            "Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª ØªØªØ­Ø³Ù† Ø¹Ù†Ø¯Ù…Ø§ ØªÙƒÙˆÙ† Ù…Ø±ØªØ§Ø­Ø§Ù‹. Ù„Ø§ ØªÙƒÙ† Ø¹ØµØ¨ÙŠØ§Ù‹ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø³Ù‡Ø±.",
            "Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© ØªÙ†Ø®ÙØ¶ 40% Ù…Ø¹ Ù‚Ù„Ø© Ø§Ù„Ù†ÙˆÙ…. Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ù†ÙˆÙ…Ùƒ.",
            "Ø£Ø¹Ø¸Ù… Ø§Ù„Ø£ÙÙƒØ§Ø± ØªØ£ØªÙŠ Ø¨Ø¹Ø¯ Ù†ÙˆÙ… Ù…Ø±ÙŠØ­. Ø¯Ù…Ø§ØºÙƒ ÙŠØ­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙˆØ£Ù†Øª Ù†Ø§Ø¦Ù….",
            "Ø§Ù„Ø³Ù‡Ø± Ø¹Ø§Ø¯Ø©ØŒ ÙˆØ§Ù„Ø¹Ø§Ø¯Ø§Øª ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ±Ù‡Ø§. Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†.",
            "Ø¬Ø³Ù…Ùƒ ÙŠØµÙ„Ø­ Ø®Ù„Ø§ÙŠØ§Ù‡ Ù„ÙŠÙ„Ø§Ù‹. ÙƒÙ„ Ù„ÙŠÙ„Ø© Ø³Ù‡Ø± = Ø´ÙŠØ®ÙˆØ®Ø© Ù…Ø¨ÙƒØ±Ø©.",
            "Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ØªØ£ØªÙŠ Ù…Ù† Ø§Ù„Ù†ÙˆÙ…ØŒ Ù„Ø§ Ù…Ù† Ø§Ù„Ù‚Ù‡ÙˆØ©.",
            "Ù‚ÙˆØ© Ø§Ù„Ø¥Ø±Ø§Ø¯Ø© ØªØ¶Ø¹Ù Ù…Ø¹ Ø§Ù„Ø³Ù‡Ø±. Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ù„ÙŠÙ„ ØºØ§Ù„Ø¨Ø§Ù‹ Ø³ÙŠØ¦Ø©.",
            "Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ù…Ù†ØªØ¸Ù… ÙŠØ­Ø³Ù† Ø§Ù„Ù…Ø²Ø§Ø¬ ÙˆÙŠÙ‚Ù„Ù„ Ø§Ù„ØªÙˆØªØ±.",
            "Ù‡Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£Ùˆ Ø§Ù„Ù…Ù†Ø´ÙˆØ± ÙŠØ³ØªØ­Ù‚ ØµØ­ØªÙƒØŸ Ø§Ù„Ø¬ÙˆØ§Ø¨ Ø¯Ø§Ø¦Ù…Ø§Ù‹: Ù„Ø§.",
            "ÙƒÙ„ ÙŠÙˆÙ… ØªÙ†Ø§Ù… Ù…Ø¨ÙƒØ±Ø§Ù‹ØŒ ØªØ¨Ù†ÙŠ Ø¹Ø§Ø¯Ø© Ø³ØªØºÙŠØ± Ø­ÙŠØ§ØªÙƒ.",
            "Ø§Ù„Ù†Ø¬Ø§Ø­ ÙŠØ¨Ø¯Ø£ Ø¨Ø±ÙˆØªÙŠÙ† ØµØ¨Ø§Ø­ÙŠØŒ ÙˆØ§Ù„Ø±ÙˆØªÙŠÙ† Ø§Ù„ØµØ¨Ø§Ø­ÙŠ ÙŠØ¨Ø¯Ø£ Ø¨Ù†ÙˆÙ… Ù…Ø¨ÙƒØ±.",
            "Ø£Ù†Øª Ø£Ù‚ÙˆÙ‰ Ù…Ù† Ø¥Ø¯Ù…Ø§Ù† Ø§Ù„Ù‡Ø§ØªÙ. Ø£Ø«Ø¨Øª Ø°Ù„Ùƒ Ø§Ù„Ø¢Ù†."
        ];
        
        // Ø±Ø³Ø§Ø¦Ù„ Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„
        const sleepMessages = [
            "Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„Ø±Ø§Ø­Ø©... Ø¬Ø³Ù…Ùƒ ÙŠØ­ØªØ§Ø¬Ùƒ ğŸŒ™",
            "Ø£ØºÙ„Ù‚ Ø¹ÙŠÙ†ÙŠÙƒ ÙˆØ§Ø³ØªØ±Ø®ÙØŒ Ø§Ù„Ø¹Ø§Ù„Ù… Ø³ÙŠÙ†ØªØ¸Ø±Ùƒ âœ¨",
            "ÙƒÙ„ Ù†Ø¬Ù… ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ ÙŠØ°ÙƒØ±Ùƒ Ø¨Ø£Ù† Ø§Ù„Ù„ÙŠÙ„ Ù„Ù„Ù†ÙˆÙ… ğŸŒŸ",
            "Ø§Ø³ØªÙ…Ø¹ Ù„Ø¬Ø³Ù…ÙƒØŒ Ø¥Ù†Ù‡ ÙŠØ·Ù„Ø¨ Ø§Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ø¢Ù† ğŸ’¤",
            "ØºØ¯Ø§Ù‹ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ Ù…Ù„ÙŠØ¡ Ø¨Ø§Ù„ÙØ±ØµØŒ Ø§Ø³ØªØ¹Ø¯ Ù„Ù‡ ğŸŒ…",
            "Ø§Ù„Ù†ÙˆÙ… Ù‡Ø¯ÙŠØ© ØªØ¹Ø·ÙŠÙ‡Ø§ Ù„Ù†ÙØ³ÙƒØŒ Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ù‡Ø§ ğŸ",
            "Ø¯Ø¹ Ø§Ù„Ù‡Ù…ÙˆÙ… Ù„ØºØ¯Ø§Ù‹ØŒ Ø§Ù„Ø¢Ù† ÙˆÙ‚Øª Ø§Ù„Ø³Ù„Ø§Ù… ğŸ•Šï¸",
            "ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© Ù†ÙˆÙ… ØªØ¨Ù†ÙŠ Ø¬Ø³Ù…Ø§Ù‹ ÙˆØ¹Ù‚Ù„Ø§Ù‹ Ø£Ù‚ÙˆÙ‰ ğŸ’ª"
        ];
        
        // Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªØ­Ø°ÙŠØ±
        const warningTips = [
            "ğŸ’¡ Ø¶Ø¹ Ù‡Ø§ØªÙÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø­Ù† Ø¨Ø¹ÙŠØ¯Ø§Ù‹ Ø¹Ù† Ø³Ø±ÙŠØ±Ùƒ",
            "ğŸ’¡ Ø§Ø´Ø±Ø¨ ÙƒÙˆØ¨ Ù…Ø§Ø¡ ÙˆØ¬Ù‡Ø² Ø³Ø±ÙŠØ±Ùƒ Ù„Ù„Ù†ÙˆÙ…",
            "ğŸ’¡ Ø£ØºÙ„Ù‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆØ§Ø³ØªØ¹Ø¯ Ù„Ù„Ø±Ø§Ø­Ø©",
            "ğŸ’¡ Ø®Ø° Ù†ÙØ³Ø§Ù‹ Ø¹Ù…ÙŠÙ‚Ø§Ù‹ ÙˆØ£Ø±Ø®Ù ÙƒØªÙÙŠÙƒ",
            "ğŸ’¡ ÙÙƒØ± ÙÙŠ 3 Ø£Ø´ÙŠØ§Ø¡ Ø¬Ù…ÙŠÙ„Ø© Ø­Ø¯Ø«Øª Ø§Ù„ÙŠÙˆÙ…",
            "ğŸ’¡ Ø§Ù‚Ø±Ø£ ØµÙØ­Ø© Ù…Ù† ÙƒØªØ§Ø¨ ÙˆØ±Ù‚ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ…"
        ];
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function loadSettings() {
            const saved = localStorage.getItem('sleepSettings');
            if (saved) {
                settings = { ...settings, ...JSON.parse(saved) };
                document.getElementById('startTime').value = settings.startTime;
                document.getElementById('endTime').value = settings.endTime;
                document.getElementById('lockEnabled').checked = settings.enabled;
                document.getElementById('warningEnabled').checked = settings.warningEnabled;
                document.getElementById('soundEnabled').checked = settings.soundEnabled;
            }
            
            const savedStats = localStorage.getItem('sleepStats');
            if (savedStats) {
                stats = { ...stats, ...JSON.parse(savedStats) };
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¹Ø¯ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ
                const now = new Date();
                const weekStart = getWeekStart(now);
                if (stats.weekStart !== weekStart.toISOString()) {
                    stats.weeklySkips = 0;
                    stats.weekStart = weekStart.toISOString();
                    localStorage.setItem('sleepStats', JSON.stringify(stats));
                }
            }
            
            updateStatsDisplay();
        }
        
        function getWeekStart(date) {
            const d = new Date(date);
            const day = d.getDay();
            const diff = d.getDate() - day + (day === 0 ? -6 : 1);
            d.setDate(diff);
            d.setHours(0, 0, 0, 0);
            return d;
        }
        
        // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function saveSettings() {
            settings.startTime = document.getElementById('startTime').value;
            settings.endTime = document.getElementById('endTime').value;
            settings.enabled = document.getElementById('lockEnabled').checked;
            settings.warningEnabled = document.getElementById('warningEnabled').checked;
            settings.soundEnabled = document.getElementById('soundEnabled').checked;
            
            localStorage.setItem('sleepSettings', JSON.stringify(settings));
            
            warningShown = false;
            warningDismissed = false;
            
            showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ“');
            checkLockStatus();
        }
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-full z-[100] slide-up';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.remove(), 3000);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit', hour12: false });
            const dateStr = now.toLocaleDateString('ar-SA', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            
            document.getElementById('currentTime').textContent = timeStr;
            document.getElementById('currentDate').textContent = dateStr;
            document.getElementById('currentTimeLock').textContent = timeStr;
            
            updateNextLockTime();
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙˆÙ‚Øª Ø§Ù„Ù‚ÙÙ„ Ø§Ù„ØªØ§Ù„ÙŠ
        function updateNextLockTime() {
            const now = new Date();
            const [startH, startM] = settings.startTime.split(':').map(Number);
            
            let nextLock = new Date(now);
            nextLock.setHours(startH, startM, 0, 0);
            
            if (nextLock <= now) {
                nextLock.setDate(nextLock.getDate() + 1);
            }
            
            const diff = nextLock - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById('nextLockTime').textContent = `${hours} Ø³Ø§Ø¹Ø© Ùˆ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù‚ÙÙ„
        function checkLockStatus() {
            if (!settings.enabled) {
                hideLockScreen();
                hideWarning();
                updateStatusBadge(false, false);
                return;
            }
            
            const now = new Date();
            const currentMinutes = now.getHours() * 60 + now.getMinutes();
            
            const [startH, startM] = settings.startTime.split(':').map(Number);
            const [endH, endM] = settings.endTime.split(':').map(Number);
            
            const startMinutes = startH * 60 + startM;
            const endMinutes = endH * 60 + endM;
            const warningMinutes = startMinutes - 15;
            
            let isLockTime = false;
            let isWarningTime = false;
            
            if (startMinutes > endMinutes) {
                // Ø§Ù„Ù‚ÙÙ„ ÙŠÙ…ØªØ¯ Ø¹Ø¨Ø± Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„
                isLockTime = currentMinutes >= startMinutes || currentMinutes < endMinutes;
                isWarningTime = currentMinutes >= warningMinutes && currentMinutes < startMinutes;
            } else {
                isLockTime = currentMinutes >= startMinutes && currentMinutes < endMinutes;
                isWarningTime = currentMinutes >= warningMinutes && currentMinutes < startMinutes;
            }
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­Ø°ÙŠØ±
            if (isWarningTime && settings.warningEnabled && !warningShown && !warningDismissed) {
                showWarning(startMinutes - currentMinutes);
            }
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù‚ÙÙ„
            if (isLockTime) {
                showLockScreen();
                updateRemainingTime();
                warningDismissed = false;
                warningShown = false;
            } else {
                hideLockScreen();
                checkDailySuccess();
            }
            
            updateStatusBadge(isLockTime, isWarningTime);
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
        function showWarning(minutesLeft) {
            warningShown = true;
            document.getElementById('warningAlert').classList.remove('hidden');
            document.getElementById('warningMinutes').textContent = Math.max(1, minutesLeft);
            document.getElementById('warningTip').textContent = warningTips[Math.floor(Math.random() * warningTips.length)];
            
            if (settings.soundEnabled) {
                playWarningSound();
            }
        }
        
        // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
        function playWarningSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Ù†ØºÙ…Ø© ØªÙ†Ø¨ÙŠÙ‡ Ù„Ø·ÙŠÙØ©
                const playTone = (freq, startTime, duration) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = freq;
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0.3, startTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);
                    
                    oscillator.start(startTime);
                    oscillator.stop(startTime + duration);
                };
                
                const now = audioContext.currentTime;
                playTone(523, now, 0.3);
                playTone(659, now + 0.3, 0.3);
                playTone(784, now + 0.6, 0.5);
            } catch (e) {
                console.log('Audio not supported');
            }
        }
        
        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
        function hideWarning() {
            document.getElementById('warningAlert').classList.add('hidden');
        }
        
        function dismissWarning() {
            warningDismissed = true;
            hideWarning();
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
        function updateRemainingTime() {
            const now = new Date();
            const [endH, endM] = settings.endTime.split(':').map(Number);
            
            let endTime = new Date(now);
            endTime.setHours(endH, endM, 0, 0);
            
            if (endTime <= now) {
                endTime.setDate(endTime.getDate() + 1);
            }
            
            const diff = endTime - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById('remainingTime').textContent = `${hours} Ø³Ø§Ø¹Ø© Ùˆ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„
        function showLockScreen() {
            document.getElementById('lockScreen').classList.remove('hidden');
            document.getElementById('sleepMessage').textContent = sleepMessages[Math.floor(Math.random() * sleepMessages.length)];
            document.getElementById('skipCount').textContent = `Ù…Ø±Ø§Øª Ø§Ù„ØªØ®Ø·ÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹: ${stats.weeklySkips}`;
            
            // Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ…
            const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const adviceIndex = dayOfYear % dailyAdvices.length;
            document.getElementById('dailyAdvice').textContent = dailyAdvices[adviceIndex];
            
            // Ø¥Ø­ØµØ§Ø¦ÙŠØ© ØªØ­ÙÙŠØ²ÙŠØ©
            if (stats.currentStreak > 0) {
                document.getElementById('motivationStat').innerHTML = `ğŸ† Ø£Ù†Øª ÙÙŠ Ø³Ù„Ø³Ù„Ø© Ù†Ø¬Ø§Ø­: <strong>${stats.currentStreak}</strong> Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ©! Ø§Ø³ØªÙ…Ø±!`;
            } else {
                document.getElementById('motivationStat').textContent = 'ğŸ’ª Ø§Ø¨Ø¯Ø£ Ø³Ù„Ø³Ù„Ø© Ù†Ø¬Ø§Ø­Ùƒ Ø§Ù„Ù„ÙŠÙ„Ø©!';
            }
        }
        
        // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„
        function hideLockScreen() {
            document.getElementById('lockScreen').classList.add('hidden');
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø©
        function updateStatusBadge(isLockTime, isWarningTime) {
            const badge = document.getElementById('statusBadge');
            if (!settings.enabled) {
                badge.textContent = 'Ù…Ø¹Ø·Ù„';
                badge.className = 'px-4 py-1 rounded-full text-sm font-bold bg-gray-500 text-white';
            } else if (isLockTime) {
                badge.textContent = 'ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ… ğŸ˜´';
                badge.className = 'px-4 py-1 rounded-full text-sm font-bold bg-indigo-500 text-white';
            } else if (isWarningTime) {
                badge.textContent = 'ØªØ­Ø¶ÙŠØ± Ù„Ù„Ù†ÙˆÙ… â°';
                badge.className = 'px-4 py-1 rounded-full text-sm font-bold bg-yellow-500 text-white';
            } else {
                badge.textContent = 'Ù†Ø´Ø· âœ“';
                badge.className = 'px-4 py-1 rounded-full text-sm font-bold bg-green-500 text-white';
            }
        }
        
        // Ø·Ù„Ø¨ ÙØªØ­ Ø§Ù„Ù‚ÙÙ„
        function requestUnlock() {
            document.getElementById('unlockModal').classList.remove('hidden');
            document.getElementById('unlockModalContent').classList.add('shake');
            setTimeout(() => {
                document.getElementById('unlockModalContent').classList.remove('shake');
            }, 500);
        }
        
        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© ÙØªØ­ Ø§Ù„Ù‚ÙÙ„
        function closeUnlockModal() {
            document.getElementById('unlockModal').classList.add('hidden');
            document.getElementById('finalWarning').classList.add('hidden');
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ø°ÙŠØ± Ø§Ù„Ø£Ø®ÙŠØ±
        function showFinalWarning() {
            document.getElementById('unlockModal').classList.add('hidden');
            document.getElementById('finalWarning').classList.remove('hidden');
            document.getElementById('totalSkips').textContent = stats.skipDays;
            
            // Ù†ØµÙŠØ­Ø© Ø£Ø®ÙŠØ±Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            const finalAdvices = [
                "ØªØ°ÙƒØ± Ù„Ù…Ø§Ø°Ø§ Ø«Ø¨Ù‘Øª Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: Ù„ØªÙƒÙˆÙ† Ø£ÙØ¶Ù„ Ù†Ø³Ø®Ø© Ù…Ù† Ù†ÙØ³Ùƒ.",
                "Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ø¢Ù† = ÙŠÙˆÙ… Ø±Ø§Ø¦Ø¹ ØºØ¯Ø§Ù‹. Ø§Ù„Ø³Ù‡Ø± = ØªØ¹Ø¨ ÙˆÙ†Ø¯Ù….",
                "Ø£Ù†Øª Ø£Ù‚ÙˆÙ‰ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ ØªØµÙØ­ Ø§Ù„Ù‡Ø§ØªÙ. Ø£Ø«Ø¨Øª Ø°Ù„Ùƒ!",
                "ÙÙƒØ± ÙÙŠ Ø´Ø¹ÙˆØ±Ùƒ ØµØ¨Ø§Ø­Ø§Ù‹ Ø¨Ø¹Ø¯ Ù†ÙˆÙ… Ø¬ÙŠØ¯. Ø£Ù„ÙŠØ³ Ø°Ù„Ùƒ Ø£ÙØ¶Ù„ØŸ"
            ];
            document.getElementById('finalAdvice').textContent = finalAdvices[Math.floor(Math.random() * finalAdvices.length)];
        }
        
        function closeFinalWarning() {
            document.getElementById('finalWarning').classList.add('hidden');
        }
        
        // ØªØ£ÙƒÙŠØ¯ ÙØªØ­ Ø§Ù„Ù‚ÙÙ„
        function confirmUnlock() {
            stats.skipDays++;
            stats.weeklySkips++;
            stats.currentStreak = 0;
            localStorage.setItem('sleepStats', JSON.stringify(stats));
            
            closeUnlockModal();
            hideLockScreen();
            updateStatsDisplay();
            
            showToast('âš ï¸ ØªÙ… ÙØªØ­ Ø§Ù„Ù‚ÙÙ„ - Ø­Ø§ÙˆÙ„ Ø§Ù„Ù†ÙˆÙ… Ù‚Ø±ÙŠØ¨Ø§Ù‹');
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù‚ÙÙ„ Ø¨Ø¹Ø¯ 15 Ø¯Ù‚ÙŠÙ‚Ø©
            setTimeout(() => {
                checkLockStatus();
            }, 15 * 60 * 1000);
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ
        function checkDailySuccess() {
            const today = new Date().toDateString();
            
            if (stats.lastCheckDate !== today) {
                const [endH, endM] = settings.endTime.split(':').map(Number);
                const now = new Date();
                
                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙˆÙ‚Øª Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù‚ÙÙ„
                if (now.getHours() >= endH || (now.getHours() === endH && now.getMinutes() >= endM)) {
                    // Ù„Ù… ÙŠØªØ®Ø·Ù Ø§Ù„Ù‚ÙÙ„ Ø§Ù„ÙŠÙˆÙ…
                    stats.successDays++;
                    stats.currentStreak++;
                    
                    if (stats.currentStreak > stats.bestStreak) {
                        stats.bestStreak = stats.currentStreak;
                    }
                    
                    showToast(`ğŸ‰ ÙŠÙˆÙ… Ù†Ø§Ø¬Ø­! Ø³Ù„Ø³Ù„ØªÙƒ: ${stats.currentStreak} Ø£ÙŠØ§Ù…`);
                }
                
                stats.lastCheckDate = today;
                localStorage.setItem('sleepStats', JSON.stringify(stats));
                updateStatsDisplay();
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStatsDisplay() {
            document.getElementById('successDays').textContent = stats.successDays;
            document.getElementById('skipDays').textContent = stats.skipDays;
            document.getElementById('currentStreak').textContent = stats.currentStreak;
            document.getElementById('bestStreak').textContent = stats.bestStreak;
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function resetStats() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªØŸ')) {
                stats = {
                    successDays: 0,
                    skipDays: 0,
                    currentStreak: 0,
                    bestStreak: 0,
                    lastCheckDate: null,
                    weeklySkips: 0,
                    weekStart: new Date().toISOString()
                };
                localStorage.setItem('sleepStats', JSON.stringify(stats));
                updateStatsDisplay();
                showToast('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
            }
        }
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
        function testWarning() {
            warningShown = false;
            showWarning(15);
        }
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„
        function testLockScreen() {
            showLockScreen();
            updateRemainingTime();
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¬ÙˆÙ…
        function createStars() {
            const starsContainer = document.getElementById('stars');
            starsContainer.innerHTML = '';
            for (let i = 0; i < 80; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 3 + 1;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.animationDuration = (Math.random() * 2 + 1) + 's';
                starsContainer.appendChild(star);
            }
        }
        
        // Ø¹Ø±Ø¶ Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        function showDailyTip() {
            const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const tipIndex = dayOfYear % dailyAdvices.length;
            document.getElementById('dailyTip').textContent = dailyAdvices[tipIndex];
            document.getElementById('tipNumber').textContent = `Ø§Ù„Ù†ØµÙŠØ­Ø© ${tipIndex + 1} Ù…Ù† ${dailyAdvices.length}`;
        }
        
        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
        function init() {
            loadSettings();
            createStars();
            showDailyTip();
            updateTime();
            checkLockStatus();
            
            // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
            setInterval(updateTime, 1000);
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙÙ„ ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
            setInterval(checkLockStatus, 30000);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
            setInterval(updateRemainingTime, 60000);
        }
        
        // PWA Install
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').classList.remove('hidden');
            document.getElementById('installInstructions').classList.add('hidden');
        });
        
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showToast('ğŸ‰ ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!');
                        document.getElementById('installSection').classList.add('hidden');
                    }
                    deferredPrompt = null;
                });
            }
        }
        
        window.addEventListener('appinstalled', () => {
            showToast('ğŸ‰ ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!');
            document.getElementById('installSection').classList.add('hidden');
        });
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø«Ø¨ØªØ§Ù‹ Ù…Ø³Ø¨Ù‚Ø§Ù‹
        if (window.matchMedia('(display-mode: standalone)').matches) {
            document.getElementById('installSection').classList.add('hidden');
        }
        
        // ØªØ³Ø¬ÙŠÙ„ Service Worker Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:text/javascript;base64,' + btoa(`
                self.addEventListener('install', (e) => {
                    self.skipWaiting();
                });
                self.addEventListener('activate', (e) => {
                    e.waitUntil(clients.claim());
                });
                self.addEventListener('fetch', (e) => {
                    e.respondWith(fetch(e.request).catch(() => caches.match(e.request)));
                });
            `)).catch(() => {});
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        init();
    </script>
</body>
</html>
